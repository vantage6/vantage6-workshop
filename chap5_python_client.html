<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introduction to vantage6: Running a PET analysis using the python client</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/chap5_python_client.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introduction to vantage6
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introduction to vantage6
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to vantage6
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 44%" class="percentage">
    44%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 44%" aria-valuenow="44" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/chap5_python_client.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="chap1_introduction_FL.html">1. Introduction to privacy enhancing technologies (PET)</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="chap2_introduction_v6.html">2. vantage6 basics</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="chap3_run_analysis_ui.html">3. Running a PET analysis without programming on vantage6</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="chap4_manage_via_ui.html">4. Managing vantage6 server via the user interface</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Running a PET analysis using the python client
        </span>
      
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="chap6_setup_node.html">6. Setting up a vantage6 node</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="chap7_algo_dev.html">7. Algorithm development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="chap8_own_project.html">8. Work on your own project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="chap4_manage_via_ui.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="chap6_setup_node.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="chap4_manage_via_ui.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Managing vantage6
        </a>
        <a class="chapter-link float-end" href="chap6_setup_node.html" rel="next">
          Next: Setting up a...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Running a PET analysis using the python client</h1>
        <p>Last updated on 2024-07-30 |

        <a href="https://github.com/vantage6/vantage6-workshop/edit/main/episodes/chap5_python_client.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How to check details of a collaboration using the Python
client?</li>
<li>How to run a task through vantage6’s Python client?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Understand the programmatic approach for performing a data analysis
through a given scenario.</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="vantage6-python-client---basic-concepts">Vantage6 Python client - basic concepts<a class="anchor" aria-label="anchor" href="#vantage6-python-client---basic-concepts"></a></h1>
<p>The vantage6 Python client is a library designed to facilitate
interaction with the vantage6 server, to perform various tasks such as
creating computation tasks, managing organizations, collaborations,
users, and collecting results. It is a versatile alternative to the
web-based user interface. Data scientists and administrators may use it
to manage resources programatically, e.g., for automating actions or
integrating them on other applications. The Python client communicates
with the server’s REST API, handling encryption and decryption where
applicable.</p>
<p>Creating an instance of the vantage6 Python client is relatively
straightforward. After installing its Python package, the user defines
server connection details: server URL, login credentials, and the
organization’s private key (if encryption is being used). In case the
server has <a href="https://docs.vantage6.ai/en/stable/technical-documentation/features/server/2fa.html" class="external-link">two-factor
authentication</a> (2FA) enabled you should also enter the corresponding
time-based 6-digit code accordingly.</p>
<p>To keep your connection details separated and secure, they should be
defined in a separate Python module:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># config.py</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>server_url <span class="op">=</span> <span class="st">"https://&lt;vantage6-server-address&gt;"</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>server_port <span class="op">=</span> <span class="dv">443</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>server_api <span class="op">=</span> <span class="st">"/api"</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>username <span class="op">=</span> <span class="st">"MY USERNAME"</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>password <span class="op">=</span> <span class="st">"MY PASSWORD"</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>organization_key <span class="op">=</span> <span class="st">""</span> <span class="co"># Path to the encryption key, if encryption is enabled.</span></span></code></pre>
</div>
<p>Once you have created the Python module with the configuration
settings, you can create the client instance as follows:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">from</span> vantage6.client <span class="im">import</span> UserClient <span class="im">as</span> Client</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># Note: we assume here the config.py you just created is in the current directory.</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># If it is not, then you need to make sure it can be found on your PYTHONPATH</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="im">import</span> config</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># Initialize the client object, and run the authentication</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>client <span class="op">=</span> Client(config.server_url, config.server_port, config.server_api,</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>                log_level<span class="op">=</span><span class="st">'debug'</span>)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>client.authenticate(config.username, config.password)</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># Setup the encryption, if you have an organization_key (e.g., use the one set on the config.py file). If not, use None.</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#client.setup_encryption(config.organization_key)</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>client.setup_encryption(<span class="va">None</span>)</span></code></pre>
</div>
<div class="section level3">
<h3 id="using-the-client">Using the client<a class="anchor" aria-label="anchor" href="#using-the-client"></a></h3>
<p>The client instance, once created, offers a set of attributes that
correspond to the vantage6 core concepts (See Chapter #3’s concept
map):</p>
<ul><li><code>client.user</code></li>
<li><code>client.organization</code></li>
<li><code>client.rule</code></li>
<li><code>client.role</code></li>
<li><code>client.collaboration</code></li>
<li><code>client.task</code></li>
<li><code>client.result</code></li>
<li><code>client.util</code></li>
<li><code>client.node</code></li>
<li><code>client.store</code></li>
<li><code>client.algorithm</code></li>
</ul><p>Each of these attributes, in turn, provides an abstraction of the
CRUD (Create, Read, Update, and Delete) operations that can be performed
to its corresponding concept*:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Get all the instances of the given '&lt;resource&gt;' in the server. For example, client.task.organization() returns all the organizations registered on the server.</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>client.<span class="op">&lt;</span>resource<span class="op">&gt;</span>.<span class="bu">list</span>()</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Create and register a new instace of &lt;resource&gt; in the server.</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>client.<span class="op">&lt;</span>resource<span class="op">&gt;</span>.create()</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Delete an specific instance of the given '&lt;resource&gt;'.</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>client.<span class="op">&lt;</span>resource<span class="op">&gt;</span>.delete()</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Get an specific instance of the given '&lt;resource&gt;'.</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>client.<span class="op">&lt;</span>resource<span class="op">&gt;</span>.get()</span></code></pre>
</div>
<p>(*) Please note that some resources do not provide all four
operations. For example, it is not possible to create new rules. Also,
note that the logged-in user may not be allowed to perform all
operations.</p>
<p>The parameters of the methods above vary based on the type of
<code>&lt;resource&gt;</code> you are working with. To get these
details, you can launch a Python interactive session that runs the
client creation script above, and use the ‘help’ command with it. For
example, <code>help(client.organization.list)</code> will show you that
you can filter the list of organizations (among others) by name,
country, and collaboration:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>python <span class="op">-</span>i client.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">help</span>(client.organization.<span class="bu">list</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="bu">list</span>(<span class="va">self</span>, name: <span class="st">'str'</span> <span class="op">=</span> <span class="va">None</span>, country: <span class="st">'int'</span> <span class="op">=</span> <span class="va">None</span>, collaboration: <span class="st">'int'</span> <span class="op">=</span> <span class="va">None</span>, study: <span class="st">'int'</span> <span class="op">=</span> <span class="va">None</span>, page: <span class="st">'int'</span> <span class="op">=</span> <span class="va">None</span>, per_page: <span class="st">'int'</span> <span class="op">=</span> <span class="va">None</span>) <span class="op">-&gt;</span> <span class="st">'list[dict]'</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    List organizations</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    Parameters</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    <span class="op">----------</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    name: <span class="bu">str</span>, optional</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>        Filter by name (<span class="cf">with</span> LIKE operator)</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>    country: <span class="bu">str</span>, optional</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>        Filter by country</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>    collaboration: <span class="bu">int</span>, optional</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>        Filter by collaboration <span class="bu">id</span>. If client.setup_collaboration() was called,</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>        the previously setup collaboration <span class="kw">is</span> used. Default value <span class="kw">is</span> <span class="va">None</span></span></code></pre>
</div>
<p>From parameters like the ones described above, it is important to
note that -for the sake of consistency- the client methods use
identifiers rather than names. This implies that, for example, to filter
the organizations that belong to a a given collaboration, you need to
know the collaboration’s identifier first.</p>
<p>You can get these identifiers through the UI, or through the client.
For example, if you need to know the identifiers of the collaborations
you have access to, you can use the <code>list()</code> function of the
<code>client.collaboration</code> resource:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Get all the details of all the collaborations you have access to:</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>client.collaboration.<span class="bu">list</span>()</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># Alternatively, to show only the 'id' and 'name' of each collaboration:</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>client.collaboration.<span class="bu">list</span>(fields<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'name'</span>])</span></code></pre>
</div>
<p>Let’s say that with the above you found that the collaboration you
need to work with has 45 as an identifier. With this, you can get the
details of the organizations that are part of it as follows:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Get all the organizations that are part of a collaboration whose identifier is 45:</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>client.organization.<span class="bu">list</span>(collaboration<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Get all only the id and name of the organizations that are part of a collaboration whose identifier is 45:</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>client.organization.<span class="bu">list</span>(collaboration<span class="op">=</span><span class="dv">45</span>, fields<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'name'</span>])</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="creating-a-new-task">Creating a new task<a class="anchor" aria-label="anchor" href="#creating-a-new-task"></a></h3>
<p>To create a new task, that is to say, to request the execution of an
algorithm on a given organization, in the context of a particular
organization, you can use the <code>create()</code> method of the
<code>client.task</code> resource.</p>
<p>This <code>create()</code> method requires a dictionary with
<code>method</code> and <code>kwargs</code> keys as an input.</p>
<p>As an input for the task creation, a dictionary with ‘method’ and
‘kwargs’ keys is required. The value of <code>method</code> must contain
the name of the function to be executed. The <code>kwargs</code> value
must be another dictionary with the properties required by the
algorithm. For example, if you want to create a task with the
<em>federated average</em> algorithm (see original <a href="https://github.com/IKNL/v6-average-py/blob/master/v6-average-py/__init__.py" class="external-link">source
code here</a>), the input would look like this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">partial_average() is a function defined on the *federated average* algorithm (see</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">algorithm source at https://github.com/IKNL/v6-average-py/blob/master/v6-average-py/__init__.py).</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">Given that 'colum_name' is the argument required by this function, the value for 'kwargs'</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">key must include a dictionary with this property:</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>input_ <span class="op">=</span> {</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="st">'method'</span>: <span class="st">'partial_average'</span>,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="st">'kwargs'</span>: {<span class="st">'column_name'</span>: <span class="st">'age'</span>}</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>}</span></code></pre>
</div>
<p>Once you have defined your task input, you can create and start it by
also specifying (using identifiers) on which organizations and for which
collaboration, it will be executed. In the following example, the
partial_average function of the algorithm
‘harbor2.vantage6.ai/demo/average’ would be executed on the vantage6
nodes created, for the organizations #12 and #23, within collaboration
#45.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>average_task <span class="op">=</span> client.task.create(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>   collaboration<span class="op">=</span><span class="dv">45</span>,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>   organizations<span class="op">=</span>[<span class="dv">12</span>,<span class="dv">23</span>],</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>   name<span class="op">=</span><span class="st">"name_for_the_task"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>   image<span class="op">=</span><span class="st">"harbor2.vantage6.ai/demo/average"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>   description<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>   input_<span class="op">=</span>input_,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>   databases<span class="op">=</span>[</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>      {<span class="st">'label'</span>: <span class="st">'default'</span>}</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>   ]</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>)</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="getting-a-task-result">Getting a task result<a class="anchor" aria-label="anchor" href="#getting-a-task-result"></a></h3>
<p>A client’s task execution request is asynchronous. This means that
once the <code>client.task.create()</code> method is invoked, the task
will begin running in the background, returning the control to the
Python program immediately (i.e., without waiting for the task to
complete).</p>
<p>This means that your client program needs to wait until the task is
completed, so you can get access to the results (or to the error
details, if something goes wrong).</p>
<p>You can use the <code>client.wait_for_result()</code> method to make
the program execution wait until the task is completed. For that, you
need the ID of the task you just created, which was included in the
dictionary returned by the <code>client.task.create()</code> method. For
the task execution request of the code snippet above, this will look
like:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Waiting for results"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>task_id <span class="op">=</span> average_task[<span class="st">'id'</span>]</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>result <span class="op">=</span> client.wait_for_results(task_id)</span></code></pre>
</div>
<p>Since the above will pause the execution of the program until the
task is completed, you can include instructions for retrieving the
results immediately afterward:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>result_info <span class="op">=</span> client.result.from_task(task_id<span class="op">=</span>task_id)</span></code></pre>
</div>
</div>
</div>
<div class="section level1">
<h1 id="working-on-the-hypothetical-case-study-programatically">Working on the hypothetical case study programatically<a class="anchor" aria-label="anchor" href="#working-on-the-hypothetical-case-study-programatically"></a></h1>
<div id="challenge-1---setup-the-node-client" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-1---setup-the-node-client" class="callout-inner">
<h3 class="callout-title">Challenge 1 - Setup the node client<a class="anchor" aria-label="anchor" href="#challenge-1---setup-the-node-client"></a>
</h3>
<div class="callout-content">
<p>The goal of this first challenge is to create a Python script for
performing tasks on <a href="./chap3_run_analysis_ui.html">Episode
3</a>‘s collaboration projects. Before installing the vantage6 libraries
(which include the client) it is important to check that these are
compatible with the server you will talk to. Check the version of the
server you worked with in Chapter 3 by accessing its URL
including’/api/version’ as a suffix (e.g.,
<code>https://SERVER_DOMAIN_NAME/api/version</code>).</p>
<p>Create and activate a Python environment and install the
<code>vantage6-client</code> for this particular server version:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">-n</span> v6-workshop python=3.10  <span class="co"># if you had not created the environment yet in the Setup section</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">conda</span> activate v6-workshop</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="ex">pip</span> install vantage6==<span class="op">&lt;</span>version<span class="op">&gt;</span></span></code></pre>
</div>
<p>Use the researcher credentials and the server URL from <a href="./chap3_run_analysis_ui.html">Episode 3</a> to create a
configuration file and a script for connecting to the server, following
the guidelines provided above. Run the script and check that the
connection is performed successfully.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<figure><img src="fig/chapter5/auth-screenshot.png" alt="Expected output" class="figure mx-auto d-block"><div class="figcaption">Expected output</div>
</figure></div>
</div>
</div>
</div>
<div id="challenge-2-use-the-client-to-find-the-identifiers-of-your-collaboration-and-its-organizations" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-2-use-the-client-to-find-the-identifiers-of-your-collaboration-and-its-organizations" class="callout-inner">
<h3 class="callout-title">Challenge 2: use the client to find the
identifiers of your collaboration and its organizations<a class="anchor" aria-label="anchor" href="#challenge-2-use-the-client-to-find-the-identifiers-of-your-collaboration-and-its-organizations"></a>
</h3>
<div class="callout-content">
<p>Use the researcher credentials from <a href="./chap3_run_analysis_ui.html">Episode 3</a>, to get the
identifiers of the two collaborations from this chapter’s scenario. Use
this information to get the identifiers of the organizations that belong
to each collaboration.</p>
<p>Refer to the <strong>Python client - basic concepts</strong> section
above to do this.</p>
<table class="table"><thead><tr class="header"><th>User</th>
<th>Roles</th>
<th>Collaboration</th>
</tr></thead><tbody><tr class="odd"><td>PhY24-rs1</td>
<td>Researcher</td>
<td>PhY24</td>
</tr><tr class="even"><td>GHT-rs1</td>
<td>Researcher</td>
<td>GHT</td>
</tr></tbody></table><p>Now, try to identify which nodes are active on each collaboration.
Hint: use the <code>client.node</code> resource. Remember that you can
use the <code>help()</code> function to see how to get the details of
the nodes of a given organization.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> client.collaboration.<span class="bu">list</span>(fields<span class="op">=</span>[<span class="st">'id'</span>, <span class="st">'name'</span>, <span class="st">'organizations'</span>])</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>[</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>    {<span class="st">'id'</span>: <span class="dv">4</span>, <span class="st">'name'</span>: <span class="st">'PhY-research'</span>, <span class="st">'organizations'</span>: <span class="st">'/api/organization?collaboration_id=4'</span>},</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    {<span class="st">'id'</span>: <span class="dv">5</span>, <span class="st">'name'</span>: <span class="st">'GHT_consortium'</span>, <span class="st">'organizations'</span>: <span class="st">'/api/organization?collaboration_id=5'</span>}</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>]</span></code></pre>
</div>
<p>By knowing the ID of the collaboration, you can find the identifiers
of the organizations that are participating on it:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> client.organization.<span class="bu">list</span>(collaboration<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>[</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    {<span class="st">'address1'</span>: <span class="st">''</span>, <span class="st">'studies'</span>: <span class="st">'/api/study?organization_id=3'</span>, <span class="st">'users'</span>: <span class="st">'/api/user?organization_id=3'</span>, <span class="st">'zipcode'</span>: <span class="st">''</span>, <span class="st">'domain'</span>: <span class="st">''</span>, <span class="st">'tasks'</span>: <span class="st">'/api/task?init_org_id=3'</span>, <span class="st">'public_key'</span>: <span class="st">''</span>, <span class="st">'name'</span>: <span class="st">'CANTABRIA_organization'</span>, <span class="st">'address2'</span>: <span class="st">''</span>, <span class="st">'nodes'</span>: <span class="st">'/api/node?organization_id=3'</span>, <span class="st">'country'</span>: <span class="st">'Spain'</span>, <span class="st">'collaborations'</span>: <span class="st">'/api/collaboration?organization_id=3'</span>, <span class="st">'runs'</span>: <span class="st">'/api/run?organization_id=3'</span>, <span class="st">'id'</span>: <span class="dv">3</span>},</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>    {<span class="st">'address1'</span>: <span class="st">''</span>, <span class="st">'studies'</span>: <span class="st">'/api/study?organization_id=4'</span>, <span class="st">'users'</span>: <span class="st">'/api/user?organization_id=4'</span>, <span class="st">'zipcode'</span>: <span class="st">''</span>, <span class="st">'domain'</span>: <span class="st">''</span>, <span class="st">'tasks'</span>: <span class="st">'/api/task?init_org_id=4'</span>, <span class="st">'public_key'</span>: <span class="st">''</span>, <span class="st">'name'</span>: <span class="st">'LIFELINES_organization'</span>, <span class="st">'address2'</span>: <span class="st">''</span>, <span class="st">'nodes'</span>: <span class="st">'/api/node?organization_id=4'</span>, <span class="st">'country'</span>: <span class="st">'The Netherlands'</span>, <span class="st">'collaborations'</span>: <span class="st">'/api/collaboration?organization_id=4'</span>, <span class="st">'runs'</span>: <span class="st">'/api/run?organization_id=4'</span>, <span class="st">'id'</span>: <span class="dv">4</span>},</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>    {<span class="st">'address1'</span>: <span class="st">''</span>, <span class="st">'studies'</span>: <span class="st">'/api/study?organization_id=5'</span>, <span class="st">'users'</span>: <span class="st">'/api/user?organization_id=5'</span>, <span class="st">'zipcode'</span>: <span class="st">''</span>, <span class="st">'domain'</span>: <span class="st">''</span>, <span class="st">'tasks'</span>: <span class="st">'/api/task?init_org_id=5'</span>, <span class="st">'public_key'</span>: <span class="st">''</span>, <span class="st">'name'</span>: <span class="st">'GAZEL_organization'</span>, <span class="st">'address2'</span>: <span class="st">''</span>, <span class="st">'nodes'</span>: <span class="st">'/api/node?organization_id=5'</span>, <span class="st">'country'</span>: <span class="st">'France'</span>, <span class="st">'collaborations'</span>: <span class="st">'/api/collaboration?organization_id=5'</span>, <span class="st">'runs'</span>: <span class="st">'/api/run?organization_id=5'</span>, <span class="st">'id'</span>: <span class="dv">5</span>},</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>    {<span class="st">'address1'</span>: <span class="st">''</span>, <span class="st">'studies'</span>: <span class="st">'/api/study?organization_id=7'</span>, <span class="st">'users'</span>: <span class="st">'/api/user?organization_id=7'</span>, <span class="st">'zipcode'</span>: <span class="st">''</span>, <span class="st">'domain'</span>: <span class="st">''</span>, <span class="st">'tasks'</span>: <span class="st">'/api/task?init_org_id=7'</span>, <span class="st">'public_key'</span>: <span class="st">''</span>, <span class="st">'name'</span>: <span class="st">'PhY24-consortium'</span>, <span class="st">'address2'</span>: <span class="st">''</span>, <span class="st">'nodes'</span>: <span class="st">'/api/node?organization_id=7'</span>, <span class="st">'country'</span>: <span class="st">''</span>, <span class="st">'collaborations'</span>: <span class="st">'/api/collaboration?organization_id=7'</span>, <span class="st">'runs'</span>: <span class="st">'/api/run?organization_id=7'</span>, <span class="st">'id'</span>: <span class="dv">7</span>}</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>]</span></code></pre>
</div>
<p>Getting the status of an organization node for a given collaboration:
The following returns the nodes (there is a node for each collaboration
the organization contributes to).</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> client.node.<span class="bu">list</span>(organization<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>[</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    {<span class="st">'config'</span>: [], <span class="st">'last_seen'</span>: <span class="st">'2024-06-18T06:57:48.114072'</span>,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    <span class="st">'organization'</span>: {<span class="st">'id'</span>: <span class="dv">4</span>, <span class="st">'link'</span>: <span class="st">'/api/organization/4'</span>,</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="st">'methods'</span>: [<span class="st">'PATCH'</span>, <span class="st">'GET'</span>]},</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="st">'collaboration'</span>: {<span class="st">'id'</span>: <span class="dv">4</span>, <span class="st">'link'</span>: <span class="st">'/api/collaboration/4'</span>,</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    <span class="st">'methods'</span>: [<span class="st">'GET'</span>, <span class="st">'PATCH'</span>, <span class="st">'DELETE'</span>]},</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    <span class="st">'name'</span>: <span class="st">'PhY-research - LIFELINES_organization'</span>, <span class="st">'status'</span>: <span class="st">'offline'</span>,</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    <span class="st">'type'</span>: <span class="st">'node'</span>, <span class="st">'ip'</span>: <span class="va">None</span>, <span class="st">'id'</span>: <span class="dv">13</span>},</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>    {<span class="st">'config'</span>: [], <span class="st">'last_seen'</span>: <span class="va">None</span>,</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>    <span class="st">'organization'</span>: {<span class="st">'id'</span>: <span class="dv">4</span>, <span class="st">'link'</span>: <span class="st">'/api/organization/4'</span>,</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>    <span class="st">'methods'</span>: [<span class="st">'PATCH'</span>, <span class="st">'GET'</span>]},</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>    <span class="st">'collaboration'</span>: {<span class="st">'id'</span>: <span class="dv">5</span>, <span class="st">'link'</span>: <span class="st">'/api/collaboration/5'</span>,</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>    <span class="st">'methods'</span>: [<span class="st">'GET'</span>, <span class="st">'PATCH'</span>, <span class="st">'DELETE'</span>]},</span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>    <span class="st">'name'</span>: <span class="st">'GHT_consortium - LIFELINES_organization'</span>, <span class="st">'status'</span>: <span class="va">None</span>,</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>    <span class="st">'type'</span>: <span class="st">'node'</span>, <span class="st">'ip'</span>: <span class="va">None</span>, <span class="st">'id'</span>: <span class="dv">18</span>}</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-3-creating-a-task-that-runs-a-partial-algorithm" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-3-creating-a-task-that-runs-a-partial-algorithm" class="callout-inner">
<h3 class="callout-title">Challenge 3: Creating a task that runs a
partial algorithm**<a class="anchor" aria-label="anchor" href="#challenge-3-creating-a-task-that-runs-a-partial-algorithm"></a>
</h3>
<div class="callout-content">
<p>The following is the information of a new algorithm <strong>(TODO a
new algorithm should be created for this)</strong>, that you need to use
on the collaboration whose 100% of its nodes are active:</p>
<ul><li>Image: harbor2.vantage6.ai/<strong>TODO</strong>alg_xxyy</li>
<li>Functions: central(), partial()</li>
<li>Algorithm source code:
github.com/<strong>TODO</strong>/repo/alg_xxyy</li>
</ul><p>Using the guidelines given in the <strong>Python client - basic
concepts</strong> section above, use the client to create a task for
executing the <code>partial()</code> function on all the nodes. Check in
the source code what the parameters of this function are, and define
their input accordingly. For the database selection, all the nodes use
the one labeled as ‘default’.</p>
<p>Include the necessary code to wait until the new task is completed,
and to get and print the results. Discuss the output with the
instructors.</p>
</div>
</div>
</div>
<div id="challenge-4-create-a-task-that-runs-a-central-function-and-figure-out-why-it-failed" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-4-create-a-task-that-runs-a-central-function-and-figure-out-why-it-failed" class="callout-inner">
<h3 class="callout-title">Challenge 4: Create a task that runs a central
function, and figure out why it failed**<a class="anchor" aria-label="anchor" href="#challenge-4-create-a-task-that-runs-a-central-function-and-figure-out-why-it-failed"></a>
</h3>
<div class="callout-content">
<p>Using the Python client, create a new task with the same algorithm
from Challenge #3. This time, launch the <code>central()</code>
function. As you will see, this time the task failed. Using the client,
try to find out which of the nodes involved on the task execution failed
and the error message. Discuss with the instructors, based on the
algorithm source code and the error message the cause of the error, and
what should be done to fix it. <strong>(TODO This requires the new
algorithm or the data on one of the nodes to cause an
error)</strong></p>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="chap4_manage_via_ui.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="chap6_setup_node.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="chap4_manage_via_ui.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Managing vantage6
        </a>
        <a class="chapter-link float-end" href="chap6_setup_node.html" rel="next">
          Next: Setting up a...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/vantage6/vantage6-workshop/edit/main/episodes/chap5_python_client.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/vantage6/vantage6-workshop/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/vantage6/vantage6-workshop/" class="external-link">Source</a></p>
				<p><a href="https://github.com/vantage6/vantage6-workshop/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:d.smits@esciencecenter.nl">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://vantage6.github.io/vantage6-workshop/chap5_python_client.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "federated learning, privacy enhancing technology, python",
  "name": "Running a PET analysis using the python client",
  "creativeWorkStatus": "active",
  "url": "https://vantage6.github.io/vantage6-workshop/chap5_python_client.html",
  "identifier": "https://vantage6.github.io/vantage6-workshop/chap5_python_client.html",
  "dateCreated": "2024-03-26",
  "dateModified": "2024-07-30",
  "datePublished": "2024-08-08"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

